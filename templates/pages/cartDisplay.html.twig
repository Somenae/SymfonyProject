{% extends 'base.html.twig' %}

{% block title %}Recapitulatif panier!
{% endblock %}

{% block main %}
	<section class="main-body d-flex justify-content-center">
		<div class="box-promo px-5">
			<div class="text-promo">
				<h2 class="text-center my-4">Panier</h2>
			</div>

			<div class="card">
				{% if cartline is same as (NULL) %}
					RIEN DANS LE PANIER
				{% else %}
					<table class="table table-hover">
						<thead class="thead-dark">
							<tr>
								<th scope="col">Nom Produit</th>
								<th scope="col">Quantité</th>
								<th scope="col">Prix par unité</th>
								<th scope="col">Reduction appliquée</th>
								<th scope="col">description</th>
								<th scope="col">Modifier/supprimer</th>
							</tr>
						</thead>
						<tbody>
							{% for line in cartline %}
								<tr>
									<th scope="row">{{ line.product.name }}</th>
									<td>{{ line.quantity }}</td>
									{% if line.product.ProductTaxes is same as (NULL) %}
										<td>{{ line.product.price }}€</td>
									{% else %}
										<td>{{ line.product.price * (1 + ((line.getProduct.getProductTaxes.getAmount) / 100)) }}€</td>
									{% endif %}

									{% if line.product.productsales is same as (NULL) %}
										<td>Pas de promotion actuellement</td>
									{% else %}
										<td>{{ line.product.productsales.amountpercentage }}%</td>
									{% endif %}


									<td>{{ line.product.description }}</td>
									<td>
										<a class="text-danger" href="{{ path('app_cart_remove',{'id' : line.id}) }}">Supprimer</a>
									</td>
								</tr>
							{% endfor %}
						</tbody>
					</table>
					<h2>Prix du panier:
						{{ price }}€</h2>
					<a class="btn btn-success" href='{{ path('app_user_order') }}'>Commander</a>
				</div>
      </div>
			{% endif %}
		</section>
	{% endblock %}
