{% extends 'base.html.twig' %}

{% block title %}Bienvenue chez Vintyle!
{% endblock %}


{% block main %}
{% for message in app.flashes('success') %}
<div class="alert alert-success">
    {{ message }}
	</div>
{% endfor %}

<section class="main-body d-flex justify-content-center pb-0 pt-5">
<div class="box-promo my-0">

			<div class="text-promo text-center">
				<h2 class="text-center mt-4">Rechercher un produit</h2>
				<p class="mb-4">Saisissez le nom du produit ci-dessous</p>
			</div>

	<div class="d-flex justify-content-center row col-lg-10 col-sm-10 col-md-10 mx-auto">
		<div class="col-6 col-xs-2 card">
			<form method="get" action="{{ path('app_search_products') }}">
				<input type="text" name="search" class="form-control d-inline-flex" placeholder="Rechercher un produit">
			</div>
			<div class="col-4 d-flex justify-content-start mt-4 mb-4">
				<button type="submit" class="btn btn-primary w-100">Rechercher</button>
			</div>
		</form>
	</div>
	</div>
</section>

	<section class="main-body d-flex justify-content-center pb-0">
		<div class="box-promo">

			<div class="text-promo text-center">
				<h2 class="text-center mt-4">Promotions</h2>
				<p class="mb-4">(3 randoms products with promo)</p>
			</div>

			<div class="container mt-3">
				<div class="row">

					{% for item in productsPromo|slice(0, 3) %}

						<div class="col-lg-4 col-md-6 col-sm-12 mb-4">
							<div class="card mx-auto">
								<img src="{{ asset('uploads/productimage/' ~ item.image) }}" class="card-img-top" alt="Card Image">
								{% if item.ProductSales is not null %}
									<div class="bg-success text-center text-white w-100">Promo :
										{{ item.ProductSales.getAmountPercentage }}%</div>
								{% endif %}
								<div class="card-body px-0 pb-0">
									<h5 class="card-title mb-0">{{ item.name }}</h5>
									<p class="card-text">{{ item.description }}</p>
									<h6 class="card-subtitle mb-1 {% if item.ProductSales is not null %} oldprice {% endif %}">{{ item.price }}€</h6>
									{% if item.ProductSales is not null %}
										<h6 class="card-subtitle mb-0">{{ item.price * (1 - (item.ProductSales.getAmountPercentage / 100)) | number_format(2, '.', ',') }}€</h6>
									{% endif %}
									<a href="{{ path('app_product_details', {'id': item.id}) }}" class="btn bouton mt-3">Accéder à ce produit</a>
								</div>
							</div>
						</div>

					{% endfor %}

				</div>


			</div>

		</section>
		{# <section class="main-body d-flex justify-content-center">
														    <hr class="hr">
														</section> #}

		<section class="main-body d-flex justify-content-center">
			<div class="box-hit">

				<div class="text-promo text-center">
					<h2 class="text-center mt-4">Hit Vinyles</h2>
					<p class="mb-4">(6 randoms products without promo)</p>
				</div>

				<div class="container mt-3">
					<div class="row">
						{% for item in products|slice(0, 6) %}

							<div class="col-lg-4 col-md-6 col-sm-12 mb-4">
								<div class="card mx-auto">
									<img src="{{ asset('uploads/productimage/' ~ item.image) }}" class="card-img-top" alt="Card Image">
									<div class="card-body px-0 pb-0">
										<h5 class="card-title mb-0">{{ item.name }}</h5>
										<p class="card-text">{{ item.description }}</p>
										<h6 class="card-subtitle mb-2">{{ item.price }}€</h6>
										<a href="{{ path('app_product_details', {'id': item.id}) }}" class="btn bouton">Accéder à ce produit</a>
									</div>
								</div>
							</div>

						{% endfor %}
					</div>

				</div>
			</div>
		</div>
	</section>


{% endblock %}
